<!DOCTYPE html>
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Cognito CBT Requisition</title>
<!-- Original by Dr. Gunther Klein and Crystal
updated 2024/10/28/ 08:33 by Dr. John Robertson - added code to view background outside of OSCAR, added radio X-boxes, updated X-box Styling,
 added textarea resize none, added email link -->

<!-- VIHA Colours 
Dark Blue color="#075b8e"
Medium Blue color="#6f8bb3"
Light Blue color="#99aacb"
Grey color="#f2f2f2"
-->
<style>
 body, textarea {
	font-size:12px;
	font-family:sans-serif;
	font-style:normal;
	font-weight:normal;
	text-align:left;
	background-color:transparent;
 }
 input {
	-moz-box-sizing: content-box;
	-webkit-print-color-adjust: exact;
	-webkit-box-sizing: content-box;
	box-sizing: content-box;
 }
  textarea {
    resize: none;
}
</style>

<style type="text/css" media="screen" >
 .noborder {
	border:1px solid; !important
 }
 html.touch #content {
	float:left;
	width:92%;
}
 html.touch #scrollgrabber {
	float:right;
	width:4%;
	margin-right:2%;
	background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAFCAAAAACh79lDAAAAAXNSR0IArs4c6QAAABJJREFUCB1jmMmQxjCT4T/DfwAPLgOXlrt3IwAAAABJRU5ErkJggg==)
 }
 html.borderradius #scrollgrabber {
	border-radius: 1em;
 }

	input#SubmitButton {
		color: white;
		text-shadow: 0px 1px 1px #ffffff;
		border-bottom: 2px solid #b2b2b2;
		background-color: #f2f2f2;
		background: -webkit-gradient(linear, left top, left bottom, from(#f2f2f2), to(#075b8e));
		background: -moz-linear-gradient(top, #f2f2f2, #075b8e);
		background: -o-linear-gradient(top, #f2f2f2, #075b8e);
		background: -ms-linear-gradient(top, #f2f2f2, #075b8e);}
	input#SubmitButton:hover {
		color: white;
		border: 1px solid #a4a4a4;
		border-top: 2px solid #b2b2b2;
		background-color: #a0dbc4;
		background: -webkit-gradient(linear, left top, left bottom, from(#075b8e), to(#f2f2f2));
		background: -moz-linear-gradient(top, #075b8e, #f2f2f2);
		background: -o-linear-gradient(top, #075b8e, #f2f2f2);
		background: -ms-linear-gradient(top, #075b8e, #f2f2f2);}

	input#PrintButton {
		color: black;
		text-shadow: 0px 1px 1px #ffffff;
		border-bottom: 2px solid #b2b2b2;
		background-color: #f2f2f2;
		background: -webkit-gradient(linear, left top, left bottom, from(#f2f2f2), to(#99aacb));
		background: -moz-linear-gradient(top, #f2f2f2, #99aacb);
		background: -o-linear-gradient(top, #f2f2f2, #99aacb);
		background: -ms-linear-gradient(top, #f2f2f2, #99aacb);}
	input#PrintButton:hover {
		color: black;
		border: 1px solid #a4a4a4;
		border-top: 2px solid #b2b2b2;
		background-color: #a0dbc4;
		background: -webkit-gradient(linear, left top, left bottom, from(#99aacb), to(#f2f2f2));
		background: -moz-linear-gradient(top, #99aacb, #f2f2f2);
		background: -o-linear-gradient(top, #99aacb, #f2f2f2);
		background: -ms-linear-gradient(top, #99aacb, #f2f2f2);}


.link {  
 border:2px solid #000000;
border-color:#99aacb;
 border-style:outset;
background:transparent;
text-decoration: none;
 cursor: pointer;
}

 .link:hover {
 border:1px solid #000000;
 border-style:outset;
 background:#075b8e;
 opacity:0.4;
 color:#99aacb;
 }

 .link:active { 
 border:3px solid #000000; 
 border-style:inset;
 background:#99aacb;
 }

</style>

<style type="text/css" media="print">
 .DoNotPrint {
	display:none;
 }
 .noborder {
	border:0px;
	background: transparent;
/* hide placeholders on print */
::placeholder {
	color: transparent;
}
</style>

	<!-- Xbox styling -->

	<style type="text/css">
	/* x-box styling - using the CSS wildcard 'containing' selector * to include all classes of x-boxes*/
	input[class*='box'] {
		position: absolute;
		font-family: Arial;
		border: 1px solid black;
		cursor: pointer;
		font-weight: bolder;
		text-align: center;
		background: #99aacb;
	}
	input[class*='box']:hover {
		color: #075b8e;
		border: 1px solid #a4a4a4;
		border-top: 2px solid #b2b2b2;
		background-color: #f2f2f2;
		background: -webkit-gradient(linear, left top, left bottom, from(#99aacb), to(#f2f2f2));
		background: -moz-linear-gradient(top, #99aacb, #f2f2f2);
		background: -o-linear-gradient(top, #99aacb, #f2f2f2);
		background: -ms-linear-gradient(top, #99aacb, #f2f2f2);
		}
	input[class*='radio'] {
		position: absolute;
		font-family: Arial;
		border: 1px solid #000000;
		cursor: pointer;
		font-weight: bolder;
		text-align: center;
		background: #99aacb;
	}
	input[class*='radio']:hover {
		color: #075b8e;
		border: 1px solid #a4a4a4;
		border-top: 2px solid #b2b2b2;
		background-color: #f2f2f2;
		background: -webkit-gradient(linear, left top, left bottom, from(#99aacb), to(#f2f2f2));
		background: -moz-linear-gradient(top, #99aacb, #f2f2f2);
		background: -o-linear-gradient(top, #99aacb, #f2f2f2);
		background: -ms-linear-gradient(top, #99aacb, #f2f2f2);
		}
.box1 {
		font-size: 12px;
		width:12px;
		height:12px;
		}
 .box1 {
	width:14px;
	height:14px;
	font-size: 14px;
	font-weight:bold;
	text-align:center;
 }
	</style>

<!-- jQuery for greater functionality -->
<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.1.min.js" integrity="sha256-gvQgAFzTH6trSrAWoH1iPo9Xc96QxSZ3feW6kem+O00=" crossorigin="anonymous" ></script>
<script> window.jQuery || document.write('<script src="../js/jquery-1.7.1.min.js">< \/script>') </script>
<script>
if (typeof jQuery === 'undefined') {
	document.write(unescape('%3Cscript%20src%3D%22../js/jquery-1.7.1.min.js%22%3E%3C/script%3E'));
}
</script>

<script language="javascript" type="text/javascript">
		/****************************
		startup functions 
		****************************/
		function startUp()
		{			
			if (document.getElementById("lastname")) {
			setDocumentTitle('Cognito CBT Requisition 2024',document.getElementById('lastname').value);
			}
			reImg();
//			setDefaults();
//			setFaxNo();
			//optimize window size/width
			top.window.resizeTo(900, screen.availHeight);
			// Recircle circled elements
			$('.circle_box').each(function(i, obj) {
    			if (document.getElementById(obj.id + "_circled").value == "1")
    				obj.style.borderWidth = '2px';
			});
		}
		
		function setDocumentTitle(Title,lastname)
		{
			// set document title
			document.title = Title + ' - ' + lastname;					
							
		}

        function setDefaults() {
            // check the newform flag to ensure this is the initial load of the form
            if (document.getElementById("newForm").value == 'True') {
				document.getElementById('Interperter_no').click();
				document.getElementById('language').value='English';
				document.getElementById('UnitsHeight').value='cm';
				document.getElementById('UnitsWeight').value='kg';
				document.getElementById('title').value='MD';
				parseDate('today',0,1,2,'-','/');
		} else { // actions if eForm is reopened
		}


}

		function changeAndCheck(id) {
			// Subsequent text field must be name of Xbox + _Text so Other and Other_Text
			var id2 = id + '_Text';
			// toggle required attribute of text field and report on if it is required - alert will appear if the field is required
			document.getElementById(id2).toggleAttribute('required');
			document.getElementById(id2).checkValidity();
		}
</script>

<script language="javascript">
function formPrint(){
	window.print();
} 
</script>

<!-- scripts to confirm closing of window if it hadnt been saved yet -->
<script language="javascript">
//keypress events trigger dirty flag
var needToConfirm = false;
document.onkeyup=setDirtyFlag;
function setDirtyFlag(){
	needToConfirm = true;
}
function releaseDirtyFlag(){
	needToConfirm = false; //Call this function to prevent an alert.
	document.getElementById('FormName').submit()
}
window.onbeforeunload = confirmExit;
function confirmExit(){
	if (needToConfirm){
		 return "You have attempted to leave this page. If you have made any changes to the fields without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?";
	 }
}
</script>


<!-- main calendar program -->
<script type="text/javascript" src="../share/calendar/calendar.js"></script>
<script type="text/javascript" src="../share/calendar/lang/calendar-en.js"></script>
<script type="text/javascript" src="../share/calendar/calendar-setup.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="../share/calendar/calendar.css" title="win2k-cold-1" />

<script type="text/javascript">
function reImg(){
// for stand alone development without uploading to OSCAR
	var strLoc = window.location.href.toLowerCase();
	if(strLoc.indexOf("https") == -1) {
		var src1 = document.getElementById("BGImage1").src;
		document.getElementById("BGImage1").src = src1.replace("$%7Boscar_image_path%7D","");
	}
}
</script>

</head>

<body  onload="startUp();"  onbeforeprint="document.forms['FormName'].checkValidity();">
<form method="post" name="FormName" id="FormName" >
<div id="page1" style="position:relative;" >
<img id="BGImage1" src="${oscar_image_path}Cognito CBT Program Requisition Form.png" style="position: relative; left: 0px; top: 0px; width:750px">

<input name="printedname" id="printedname" type="text" class="noborder" style="position:absolute; left:474px; top:48px; width:228px; height:20px; "  oscarDB=current_user>
<input name="clinicname" id="clinicname" type="text" class="noborder" style="position:absolute; left:466px; top:76px; width:236px; height:20px; "  oscarDB=clinic_name>
<input name="clinicfax" id="clinicfax" type="text" class="noborder" style="position:absolute; left:551px; top:109px; width:151px; height:16px; "  oscarDB=clinic_fax>
<input name="date" id="date" type="text" class="noborder" style="position:absolute; left:435px; top:131px; width:254px; height:19px; "  oscarDB=today>
<input name="firstname" id="firstname" type="text" class="noborder" style="position:absolute; left:409px; top:202px; width:127px; height:16px; "  oscarDB=patient_nameF>
<input name="lastname" id="lastname" type="text" class="noborder" style="position:absolute; left:409px; top:229px; width:166px; height:16px; "  oscarDB=patient_nameL>
<input name="preferred" id="preferred" type="text" class="noborder" style="position:absolute; left:550px; top:201px; width:146px; height:17px; " >
<input name="gender" id="gender" type="text" class="noborder" style="position:absolute; left:601px; top:230px; width:95px; height:15px; "  oscarDB=sex>
<input name="dob" id="dob" type="text" class="noborder" style="position:absolute; left:409px; top:256px; width:126px; height:17px; "  oscarDB=dobc>
<input name="phone" id="phone" type="text" class="noborder" style="position:absolute; left:410px; top:109px; width:132px; height:16px; "  oscarDB=clinic_phone>
<input name="phone2" id="phone2" type="text" class="noborder" style="position:absolute; left:550px; top:256px; width:146px; height:17px; "  oscarDB=phone>
<input name="phn" id="phn" type="text" class="noborder" style="position:absolute; left:432px; top:278px; width:264px; height:20px; "  oscarDB=hinc>
<input name="email" id="email" type="text" class="noborder" style="position:absolute; left:437px; top:306px; width:259px; height:20px; "  oscarDB=email>
<input name="anxiety_none" id="anxiety_none" type="text" class="Radio box1" style="left:32px; top:437px;" >
<input name="anxiety_mild" id="anxiety_mild" type="text" class="Radio box1" style="left:108px; top:437px;" >
<input name="anxiety_moderate" id="anxiety_moderate" type="text" class="Radio box1" style="left:177px; top:437px;" >
<input name="anxiety_severe" id="anxiety_severe" type="text" class="Radio box1" style="left:277px; top:437px;" >
<input name="depression_none" id="depression_none" type="text" class="Radio box1" style="left:34px; top:483px;" >
<input name="depression_mild" id="depression_mild" type="text" class="Radio box1" style="left:109px; top:483px;" >
<input name="depression_moderate" id="depression_moderate" type="text" class="Radio box1" style="left:178px; top:483px;" >
<input name="depression_severe" id="depression_severe" type="text" class="Radio box1" style="left:279px; top:483px;" >
<input name="insomnia_none" id="insomnia_none" type="text" class="Radio box1" style="left:34px; top:529px;" >
<input name="insomnia_mild" id="insomnia_mild" type="text" class="Radio box1" style="left:110px; top:529px;" >
<input name="insomnia_moderate" id="insomnia_moderate" type="text" class="Radio box1" style="left:179px; top:529px;" >
<input name="insomnia_severe" id="insomnia_severe" type="text" class="Radio box1" style="left:280px; top:529px;" >
<textarea name="page1_10" id="page1_10" type="text" class=" noborder" style="position:absolute; left:28px; top:586px; width:364px; height:50px; background-color:white; " ></textarea>
<input name="icertify" id="icertify" type="text" class="Xbox box1" style="left:34px; top:662px;" >
<input name="icertify2" id="icertify2" type="text" class="Xbox box1" style="left:34px; top:769px;" >
<input name="bipolar_none" id="bipolar_none" type="text" class="Radio box1" style="left:412px; top:434px;" >
<input name="bipolar_stable" id="bipolar_stable" type="text" class="Radio box1" style="left:488px; top:434px;" >
<input name="bipolar_uncontrolled" id="bipolar_uncontrolled" type="text" class="Radio box1" style="left:578px; top:434px;" >
<input name="obsessive_none" id="obsessive_none" type="text" class="Radio box1" style="left:412px; top:481px;" >
<input name="obsessive_stable" id="obsessive_stable" type="text" class="Radio box1" style="left:488px; top:481px;" >
<input name="obsessive_uncontrolled" id="obsessive_uncontrolled" type="text" class="Radio box1" style="left:578px; top:481px;" >
<input name="PTSD_none" id="PTSD_none" type="text" class="Radio box1" style="left:412px; top:530px;" >
<input name="PTSD_stable" id="PTSD_stable" type="text" class="Radio box1" style="left:488px; top:530px;" >
<input name="PTSD_uncontrolled" id="PTSD_uncontrolled" type="text" class="Radio box1" style="left:578px; top:530px;" >
<input name="otherconditions" id="otherconditions" type="text" class="noborder" style="position:absolute; left:457px; top:552px; width:231px; height:18px; " >
<input name="otherconditions_none" id="otherconditions_none" type="text" class="Radio box1" style="left:412px; top:576px;" >
<input name="otherconditions_Stable" id="otherconditions_Stable" type="text" class="Radio box1" style="left:488px; top:576px;" >
<input name="otherconditions_uncontrolled" id="otherconditions_uncontrolled" type="text" class="Radio box1" style="left:578px; top:576px;" >
<input name="eating_none" id="eating_none" type="text" class="Radio box1" style="left:412px; top:624px;" >
<input name="eating_past" id="eating_past" type="text" class="Radio box1" style="left:488px; top:624px;" >
<input name="eating_present" id="eating_present" type="text" class="Radio box1" style="left:578px; top:624px;" >
<input name="abuse_none" id="abuse_none" type="text" class="Radio box1" style="left:412px; top:671px;" >
<input name="abuse_past" id="abuse_past" type="text" class="Radio box1" style="left:488px; top:671px;" >
<input name="abuse_present" id="abuse_present" type="text" class="Radio box1" style="left:578px; top:671px;" >
<input name="addictions_none" id="addictions_none" type="text" class="Radio box1" style="left:412px; top:719px;" >
<input name="addictions_past" id="addictions_past" type="text" class="Radio box1" style="left:488px; top:719px;" >
<input name="addictions_present" id="addictions_present" type="text" class="Radio box1" style="left:578px; top:719px;" >
<input name="genderdys_none" id="genderdys_none" type="text" class="Radio box1" style="left:412px; top:767px;" >
<input name="genderdys_past" id="genderdys_past" type="text" class="Radio box1" style="left:488px; top:767px;" >
<input name="genderdys_present" id="genderdys_present" type="text" class="Radio box1" style="left:578px; top:767px;" >
<input name="suicidal_none" id="suicidal_none" type="text" class="Radio box1" style="left:412px; top:812px;" >
<input name="suicidal_past" id="suicidal_past" type="text" class="Radio box1" style="left:488px; top:812px;" >
<input name="suicidal_present" id="suicidal_present" type="text" class="Radio box1" style="left:578px; top:812px;" >
<input name="region_sooke" id="region_sooke" type="text" class="Radio box1" style="left:210px; top:871px;" >
<input name="region_comox" id="region_comox" type="text" class="Radio box1" style="left:496px; top:871px;" >
<input name="region_cowichan" id="region_cowichan" type="text" class="Radio box1" style="left:210px; top:892px;" >
<input name="region_nanaimo" id="region_nanaimo" type="text" class="Radio box1" style="left:496px; top:892px;" >

<a name="CognitoEmail" id="CognitoEmail"style="position:absolute; left:395px; top:937px; font-family:sans-serif; width:95px; height:12px; text-decoration:none" class="link" onclick="javascript:window.open('mailto:refer@getcognito.ca?Subject=Patient%20Referral&body=Please see the attached referral form.', 'mail');  event.preventDefault();" title="Email to Cognito Clinic"></a>


<div class="DoNotPrint" id="BottomButtons" style="position: absolute; top:971px; left:0px;">
	<table><tr><td>
		Subject: <input name="subject" id="subject" size="40" type="text"> <br> 
		<input value="Submit" name="SubmitButton" id="SubmitButton" type="button" onclick=" releaseDirtyFlag();"> 
		 <input value="Reset" name="ResetButton" id="ResetButton" type="reset"> 
			<input value="Print" name="PrintButton" id="PrintButton" type="button" onclick="formPrint();"> 
	</td></tr></table>

<!-- Copy Left -->
<a rel="liscence" href="https://www.gnu.org/licenses/gpl.html" target="blank"><img alt="GPLv3" src="https://www.gnu.org/graphics/gplv3-88x31.png"/></a><br>
</div>
</div>
 </form>

<!-- Define Date Calendars -->
<script type="text/javascript">
	Calendar.setup( { inputField : "date", ifFormat : "%Y-%m-%d",  button : "date" } );
</script>


<!-- Xbox Script -->
<script type="text/javascript">
	var b = document.getElementsByClassName('Xbox');
	for (var i = 0; i < b.length; i++) {
		b[i].onclick = function(){
			let x = this.id;
			if (document.getElementById(x).value.length < 1) {
				document.getElementById(x).value ='X';
			} else {
				document.getElementById(x).value ='';
			}
			return false;
		}
	}

var r = document.getElementsByClassName("Radio");
//console.log("Radio array length is "+r.length);
for(var i=0; i<r.length; i++){

 r[i].onclick = function(){ 
	let x = this.id;

   var partA = x.substring(0, x.indexOf("_"));
   let items = document.querySelectorAll("[id^='"+partA+"_']");
   //console.log("click on " + x + " in a group of " +items.length); 
     for(let item of items){
    if (x != item.id) { 
		item.value = ''; 
	} else {
		document.getElementById(x).value ='X';
	}
  }

 } 
} 
</script>

</body>
</html>
