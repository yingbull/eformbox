<html>
<head>
<META http-equiv='Content-Type' content='text/html; charset=UTF-8'>
<title>myPhysio2go Clinic Physiotherapy Referral (201-4388 Still Creek Drive, Burnaby, BC)</title>
<script src='${oscar_javascript_path}jquery/jquery-2.2.4.min.js'>
</script>
<script>window.jQuery || document.write("\x3cscript src='https://code.jquery.com/jquery-2.2.4.min.js'\x3e\x3c\/script\x3e");</script>
<script src='${oscar_javascript_path}eforms/faxControl.js'>
</script>
<style>
		/* base style for pages */
		.page_container {
			position: relative;
			background: #ffffff;
			float: left;
			border: solid 0;
			margin: 0;
		}

		/* div containing form input elements */
		.input_elements {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}

		/* base styling for input wrapper divs */
		.gen-widget {
			display: inline-block;
			text-align: left;
			vertical-align: top;
			background: transparent;
			border: 0;
		}

		/* style wrapped input elements */
		.gen-widget input, textarea {
			position: absolute;
			display: inline-block;
			text-align: left;
			font-weight: normal;
			font-size: 12px;
			font-family: 'Helvetica', 'Arial', sans-serif;
			background: transparent;
			color: #000000;
			border: 1px solid #d2d2d2;
			padding: 0;
			width: 100%;
			height: 100%;
			z-index: 10;
			margin: 0;
		}

		/* define xbox styling */
		.gen-xBox input {
			background: #f3f3f3;
			text-align: center;
			font-weight: bold;
			font-size: 9px;
			border: 1px solid black;
			cursor: pointer;
		}
		.gen-xBox input:focus {
			outline: none;
			color: transparent;
			text-shadow: 0 0 0 #000;
		}
		/* define custom checkbox styling */
		.gen-checkbox input {
			background: #f3f3f3;
			text-align: center;
			font-weight: bold;
			font-size: 9px;
			border: 1px solid black;
			cursor: pointer;
		}
		.gen-checkbox input:focus {
			outline: none;
			color: transparent;
			text-shadow: 0 0 0 #000;
		}

		/* define other */
		.noborder {
			border-color: transparent !important;
		}

		/* print only styling */
		@media print {
			.DoNotPrint {
				display: none;
			}

			.noborderPrint {
				border-color: transparent !important;
			}

			.page_container {
				page-break-after: always;
			}
		}

		/* define label styling (only used by generated labels) */
		.label-style_1 {
			color: #000000;
			font-size: 12px;
			font-weight: normal;
			font-family: Verdana, Arial, sans-serif;
		}
	</style>
<script>
		var needToConfirm = false;
		/** call this to prevent closing the window without a confirmation */
		function setDirtyFlag() {
			needToConfirm = true;
		}
		/** call this to prevent the exit confirmation popup when closing the window */
		function releaseDirtyFlag() {
			needToConfirm = false;
		}
		/** call this function on page load to prevent the window from closing
		 * without confirmation when unsaved changes have been made */
		function initConfirmClose() {
			window.addEventListener("beforeunload", function (event) {
				if (needToConfirm) {
					var confirmationMessage = "You have attempted to leave this page. " +
						"If you have made any changes to the fields without clicking the Submit button, " +
						"your changes will be lost. Are you sure you want to exit this page?";
					event.returnValue = confirmationMessage;
					return confirmationMessage;
				}
			});
			$("input").change(function (event) {
				setDirtyFlag();
			});
		}
		/** this function fixes images paths in the eform to allow image use outside of oscar.
		 *  This is useful when developing the eform, but can be removed for final versions */
		function replaceOscarImagePathsWhenLocal($selector) {
			var strLoc = window.location.href.toLowerCase();
			if (strLoc.indexOf("https") == -1) {
				$selector.find("img").not(".signature_data").each(function () {
					this.src = this.src.replace(/$\%7Boscar_image_path\%7D/, '');
				});
			}
		}
		/** initializes custom x-box input functionality.
		 *  should be called once on eform load */
		function initXBoxes($selector) {
			$selector.find(".xBox").click(function () {
				$(this).val($(this).val() === 'X' ? '' : 'X');
			}).keypress(function (event) {
				// any key press except tab will constitute a value change to the checkbox
				if (event.which != 0) {
					$(this).click();
					return false;
				}
			});
		}
		/** initializes custom checkboxes input functionality using utf-8 character.
		 *  should be called once on eform load */
		function initUTF8Checkboxes($selector) {
			$selector.find(".utf8Check").click(function () {
				$(this).val($(this).val() === '\u2713' ? '' : '\u2713');
			}).keypress(function (event) {
				// any key press except tab will constitute a value change to the checkbox
				if (event.which != 0) {
					$(this).click();
					return false;
				}
			});
		}
		/** pre-check checkboxes and xboxes based on patient gender */
		function initPrecheckedCheckboxes($selector) {
			var $patientGender = $("#PatientGender");
			if ($patientGender) {
				var filter = ".gender_precheck_" + $patientGender.val();
				$selector.find("input[type=checkbox]").filter(filter).prop('checked', true);
				$selector.find(".xBox").filter(filter).val('X');
				$selector.find(".utf8Check").filter(filter).val('\u2713');
			}
		}
		/** This function is called when the eform has been loaded */
		function onEformLoad() {
			var $input_elements = $(".input_elements");
			replaceOscarImagePathsWhenLocal($("#eform_container"));
			initXBoxes($input_elements);
			initUTF8Checkboxes($input_elements);
			initPrecheckedCheckboxes($input_elements);
			initConfirmClose();
		}
		/** This function is called when the print button is clicked */
		function onEformPrint() {
			window.print();
		}
		/** This function is called when the eform submit button is clicked */
		function onEformSubmit() {
			releaseDirtyFlag();
			document.forms[0].submit();
		}
		/** This function is called when the eform print & submit button is clicked */
		function onEformPrintSubmit() {
			onEformPrint();
			releaseDirtyFlag();
			setTimeout('document.forms[0].submit()', 2000);
		}
	</script>
</head>
<body onload='onEformLoad();'>
<div id='eform_container'style='max-width: 850px'>
<form id="inputForm" action="">
<div id="page_1" class="page_container ui-droppable" style="width: 850px; height: 1100px;">
<img id="gen_backgroundImage1" class="gen-layer1" src="${oscar_image_path}Physician Referral(3).png" style="width: 100%; height: auto; z-index: 0;">
<div class="input_elements">
<div id="gen_widgetId1" class="gen-widget gen-checkbox gen-layer3 gen-resize-destroyed gen-draggable-destroyed" style="width: 23px; height: 23px; position: absolute; z-index: 12; top: 806.688px; left: 293.859px;">
<input type="text" class="gen_input utf8Check" autocomplete="off" id="gen_inputId1" name="gen_inputId1">
</div>
<div id="gen_widgetId2" class="gen-widget gen-checkbox gen-layer3 gen-resize-destroyed gen-draggable-destroyed" style="width: 24px; height: 24px; position: absolute; z-index: 11; top: 805.688px; left: 416.859px;">
<input type="text" class="gen_input utf8Check" autocomplete="off" id="gen_inputId2" name="gen_inputId2">
</div>
<div id="gen_widgetId3" class="gen-widget gen-checkbox gen-layer3 gen-resize-destroyed gen-draggable-destroyed" style="width: 23px; height: 23px; position: absolute; z-index: 10; top: 805.688px; left: 549.859px;">
<input type="text" class="gen_input utf8Check" autocomplete="off" id="gen_inputId3" name="gen_inputId3">
</div>
<div id="gen_widgetId5" class="gen-widget  gen-layer3 gen-resize-destroyed gen-draggable-destroyed" style="width: 486px; height: 88px; position: absolute; z-index: 13; top: 552.125px; left: 226.859px;">
<textarea class="gen_input noborderPrint" style="resize: none;" id="gen_inputId5" name="gen_inputId5">
</textarea>
</div>
<div id="gen_widgetId6" class="gen-widget  gen-layer3 gen-resize-destroyed gen-draggable-destroyed" style="width: 480px; height: 134px; position: absolute; z-index: 14; top: 650.125px; left: 233.859px;">
<textarea class="gen_input noborderPrint" style="resize: none;" id="gen_inputId6" name="gen_inputId6">
</textarea>
</div>
<div id="gen_widgetId7" class="gen-widget  gen-layer3 gen-resize-destroyed gen-draggable-destroyed" style="width: 425px; height: 27px; position: absolute; z-index: 15; top: 852.125px; left: 286.859px;">
<input type="text" class="gen_input noborderPrint" oscardb="doctor" id="gen_inputId7" name="gen_inputId7">
</div>
<div id="gen_widgetId8" class="gen-widget  gen-layer3 gen-resize-destroyed gen-draggable-destroyed" style="width: 234px; height: 30px; position: absolute; z-index: 19; top: 913.125px; left: 477.859px;">
<input type="text" class="gen_input noborderPrint" oscardb="appt_date" id="gen_inputId8" name="gen_inputId8">
</div>
<div id="gen_widgetId4" class="gen-widget  gen-layer3 gen-resize-destroyed gen-draggable-destroyed" style="width: 498px; height: 36px; position: absolute; z-index: 18; top: 502.125px; left: 216.859px;">
<input type="text" class="gen_input noborderPrint" oscardb="patient_name" id="gen_inputId4" name="gen_inputId4">
</div>
</div>
</div>
<div class="DoNotPrint" id="BottomButtons">
<!-- Form Control Buttons -->
<label for="subject">Subject:</label>
<input name="subject" id="subject" size="40" type="text">
<input value="Submit" name="SubmitButton" id="SubmitButton" type="button" onclick="onEformSubmit();">
<input value="Print" name="PrintButton" id="PrintButton" type="button" onclick="onEformPrint();">
<input value="Print &amp; Submit" name="PrintSubmitButton" id="PrintSubmitButton" type="button" onclick="onEformPrintSubmit();">
<div id="faxControl">
</div>
</div>
</form>
</div>
</body>
</html>